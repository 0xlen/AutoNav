/*
Parker Conroy
Algorithmic Robotics Lab @ University of Utah
This program launches the AR Drone.
It is intended as a simple example for those starting with the AR Drone platform.
*/
#include <ros/ros.h>
#include <geometry_msgs/Twist.h>
geometry_msgs::Twist msg;

int main(int argc, char** argv)
{
ROS_INFO("Flying ARdrone");
ros::init(argc, argv,"ARDrone_test");
ros::NodeHandle node;
ros::Rate loop_rate(50);
ros::Publisher pub_vel;
pub_vel = node.advertise<geometry_msgs::Twist>("/cmd_vel", 1000); /* Message queue length is just 1 */
while (ros::ok())
{
double time_start=(double)ros::Time::now().toSec();
while ((double)ros::Time::now().toSec()< time_start+3.0) /* Send command for five seconds*/
{
msg.angular.z = -0.3;
pub_vel.publish(msg); /* launches the drone */
ros::spinOnce();
loop_rate.sleep();
}//time loop
ROS_INFO("ARdrone launched");
exit(0);
}//ros::ok loop
}//main
